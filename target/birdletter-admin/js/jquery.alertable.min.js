//
// jquery.alertable.js - Minimal alert and confirmation alternatives.
//
// Developed by Cory LaViska for A Beautiful Site, LLC
//
// Licensed under the MIT license: http://opensource.org/licenses/MIT
//
jQuery&&function(e){"use strict";function t(t,i,c){var u=e.Deferred();return d=document.activeElement,d.blur(),e(l).add(n).remove(),c=e.extend({},e.alertable.defaults,c),l=e(c.modal).hide(),n=e(c.overlay).hide(),o=e(c.okButton),r=e(c.cancelButton),c.html?l.find(".alertable-message").html(i):l.find(".alertable-message").text(i),e(l).find(".alertable-buttons").append("alert"===t?"":r).append(o),e(c.container).append(n).append(l),c.show.call({modal:l,overlay:n}),e(l).find(":input:last").focus(),o.on("click.alertable",function(){a(c),u.resolve()}),r.on("click.alertable",function(){a(c),u.reject()}),e(document).on("keydown.alertable",function(t){13!==t.keyCode&&27!==t.keyCode||(t.preventDefault(),a(c),13!==t.keyCode||e(t.target).is(r)?u.reject():u.resolve())}),e(document).on("focus.alertable","*",function(t){e(t.target).parents().is(".alertable")||(t.stopPropagation(),t.target.blur(),e(l).find(":input:first").focus())}),u.promise()}function a(t){t.hide.call({modal:l,overlay:n}),e(document).off(".alertable"),o.off(".alertable"),r.off(".alertable"),d.focus()}var l,n,o,r,d;e.alertable={alert:function(e,a){return t("alert",e,a)},confirm:function(e,a){return t("confirm",e,a)},defaults:{container:"body",html:!1,cancelButton:'<button class="alertable-cancel" type="button">Cancel</button>',okButton:'<button class="alertable-ok" type="button">OK</button>',overlay:'<div class="alertable-overlay"></div>',modal:'<div class="alertable"><div class="alertable-message"></div><div class="alertable-buttons"></div></div>',hide:function(){e(this.modal).add(this.overlay).fadeOut(100)},show:function(){e(this.modal).add(this.overlay).fadeIn(100)}}}}(jQuery);